version: '3.8'

services:
  sdk:
    build: .
    volumes:
      - .:/app
      - pnpm-store:/root/.local/share/pnpm/store
      - node_modules:/app/node_modules
    command: pnpm run dev
    
  proto:
    build: .
    volumes:
      - .:/app
      - pnpm-store:/root/.local/share/pnpm/store
      - node_modules:/app/node_modules
    command: >
      sh -c "pnpm install && pnpm run generate-proto"

volumes:
  node_modules:
  pnpm-store: 